DROP TABLE ENTREPRIESES CASCADE CONSTRAINT;
DROP TABLE ETUDIANTS CASCADE CONSTRAINT;
DROP TABLE STAGES CASCADE CONSTRAINT;
DROP TABLE POSTULER CASCADE CONSTRAINT;
CREATE
  TABLE Entreprises
  (
    NumEnt     CHAR (6) NOT NULL ,
    NomEnt     VARCHAR2 (40) ,
    AdresseEnt VARCHAR2 (50) ,
    TelEnt     VARCHAR2 (15)
  ) ;
ALTER TABLE Entreprises ADD CONSTRAINT Entreprises_PK PRIMARY KEY ( NumEnt ) ;

CREATE
  TABLE Etudiants
  (
    Numad  NUMBER NOT NULL ,
    Nom    VARCHAR2 (30) ,
    Prenom VARCHAR2 (30)
  ) ;
ALTER TABLE Etudiants ADD CONSTRAINT Etudiants_PK PRIMARY KEY ( Numad ) ;

CREATE
  TABLE Postuler
  (
    Numad    NUMBER NOT NULL ,
    NumStage NUMBER NOT NULL ,
    Priorite NUMBER (2)
  ) ;
ALTER TABLE Postuler ADD CONSTRAINT Postuler_PK PRIMARY KEY ( Numad, NumStage )
;

CREATE
  TABLE Stages
  (
    NumStage    NUMBER NOT NULL ,
    Description VARCHAR2 (100) NOT NULL ,
    typeStg     CHAR (3)
  ) ;
ALTER TABLE Stages ADD CONSTRAINT Stages_PK PRIMARY KEY ( NumStage ) ;

ALTER TABLE Postuler ADD CONSTRAINT Postuler_Etudiants_FK FOREIGN KEY ( Numad )
REFERENCES Etudiants ( Numad ) ;

ALTER TABLE Postuler ADD CONSTRAINT Postuler_Stages_FK FOREIGN KEY ( NumStage )
REFERENCES Stages ( NumStage ) ;

INSERT INTO ETUDIANTS VALUES(12,'PROULX','WILLIAM');
INSERT INTO ETUDIANTS VALUES(13,'MARTIN','JONATHAN');
INSERT INTO ETUDIANTS VALUES(14,'VALENTE','OLIVIER');
INSERT INTO ETUDIANTS VALUES(15,'LEROY','MATHIEU');
INSERT INTO ETUDIANTS VALUES(20,'BEAULIEU','MARTIN');

INSERT INTO STAGES VALUES(100,'gestion dune ecole hoteliere','ges');
INSERT INTO STAGES VALUES(101,'mise a jour du site web de la bibliotheque','ges');
INSERT INTO STAGES VALUES(200,'automatisation dune serre','ind');
INSERT INTO STAGES VALUES(102,'application android pour faire les courses','ges');
INSERT INTO STAGES VALUES(103,'application android pour clavardage','ges');

INSERT INTO ENTREPRISES VALUES('Xper','Xperdoc Inc','24 rue de lespoir,Laval','(450)345-5678');
INSERT INTO ENTREPRISES VALUES('Zens','zensol automation','420 rue de la paix Montreal','(514)230-4523');
INSERT INTO ENTREPRISES VALUES('comac','comacoptimisation','410 grand allee boisbriand','(450)530-1223');
INSERT INTO ENTREPRISES VALUES('exa','System Exa','222 cote vertue Montreal','(514)111-1223');

INSERT INTO POSTULER VALUES(20,102,3);
INSERT INTO POSTULER VALUES(12,100,1);
INSERT INTO POSTULER VALUES(12,103,2);
INSERT INTO POSTULER VALUES(14,103,1);
INSERT INTO POSTULER VALUES(14,100,3);
INSERT INTO POSTULER VALUES(14,101,2);
INSERT INTO POSTULER VALUES(14,102,4);
INSERT INTO POSTULER VALUES(20,101,2);
INSERT INTO POSTULER VALUES(20,100,1);


